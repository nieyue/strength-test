webpackJsonp([15],{KEVj:function(s,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a("mvHQ"),r=a.n(t),i={name:"Assess",data:function(){var s=this;return{params:{pageSizeOpts:[10,20,50,100,500,1e3],startNum:1,currentPage:1,pageNum:1,pageSize:10,total:0},rankList:[{id:1,value:"不良"},{id:2,value:"未达"},{id:3,value:"合格"},{id:4,value:"良好"},{id:5,value:"优秀"}],sexList:[{id:1,value:"男性"},{id:2,value:"女性"},{id:3,value:"未知"}],rankParamsList:[{id:"",value:"全部"},{id:1,value:"不良"},{id:2,value:"未达"},{id:3,value:"合格"},{id:4,value:"良好"},{id:5,value:"优秀"}],sexParamsList:[{id:"",value:"全部"},{id:1,value:"男性"},{id:2,value:"女性"},{id:3,value:"未知"}],addAssessModel:!1,addLoading:!1,addAssessRules:{},addAssess:{},updateAssessModel:!1,updateLoading:!1,updateAssessRules:{},updateAssess:{},deleteAssess:{},assessList:[],assessColumns:[{title:"序号",align:"center",render:function(e,a){return e("span",a.index+(s.params.currentPage-1)*s.params.pageSize+s.params.startNum)}},{title:"测评id",key:"assessId",align:"center"},{title:"创建时间",key:"createDate",sortable:!0,align:"center",render:function(s,e){return s("div",e.row.createDate.substr(0,10))}},{title:"年龄",key:"age",align:"center"},{title:"性别",align:"center",render:function(e,a){var t="";return s.sexList.forEach(function(s){s.id==a.row.sex&&(t=s.value)}),e("span",t)}},{title:"操作",key:"action",align:"center",render:function(e,a){e("Button",{props:{type:"primary",size:"small"},style:{margin:"5px"},on:{click:function(){s.update(a.row)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},style:{margin:"5px"},on:{click:function(){s.delete(a.row)}}},"删除");var t=e("Button",{props:{type:"error",size:"small"},style:{margin:"5px"},on:{click:function(){var e=r()({currentPage:1,assessId:a.row.assessId});s.$router.push("/main/assessProject/"+e),setTimeout(function(){s.Hub.$emit("navroad",s.$router.currentRoute)},200)}}},"单项测评"),i=e("Button",{props:{type:"success",size:"small"},style:{margin:"5px"},on:{click:function(){var s=r()({currentPage:1,assessId:a.row.assessId,accountId:a.row.accountId,pageSize:2,createDate:a.row.createDate.substr(0,10)+" 00:00:00"});open("/#/data/"+s,"_blank")}}},"2次报告"),n=e("Button",{props:{type:"success",size:"small"},style:{margin:"5px"},on:{click:function(){var s=r()({currentPage:1,assessId:a.row.assessId,accountId:a.row.accountId,pageSize:3,createDate:a.row.createDate.substr(0,10)+" 00:00:00"});open("/#/data/"+s,"_blank")}}},"3次报告"),o=e("Button",{props:{type:"success",size:"small"},style:{margin:"5px"},on:{click:function(){var s=r()({currentPage:1,assessId:a.row.assessId,accountId:a.row.accountId,pageSize:7,createDate:a.row.createDate.substr(0,10)+" 00:00:00"});open("/#/data/"+s,"_blank")}}},"7次报告"),d=e("Button",{props:{type:"success",size:"small"},style:{margin:"5px"},on:{click:function(){var s=r()({currentPage:1,assessId:a.row.assessId,accountId:a.row.accountId,pageSize:30,createDate:a.row.createDate.substr(0,10)+" 00:00:00"});open("/#/data/"+s,"_blank")}}},"30次报告");e("div","");return e("div",[t,i,n,o,d])}}]}},methods:{search:function(){this.params.currentPage=1,this.params.pageNum=1,this.getList()},selectPage:function(s){this.params.currentPage=s,this.params.pageNum=(this.params.currentPage-1)*this.params.pageSize+this.params.startNum;var e=r()({currentPage:s,accountId:JSON.parse(this.$route.params.pathParams).accountId});this.$router.push(this.$route.path.substr(0,this.$route.path.indexOf(this.$route.params.pathParams))+e),this.getList()},onPageSizeChange:function(s){this.getList(s)},getList:function(s){var e=this;this.params.pageSize=s||this.params.pageSize,this.params.accountId=JSON.parse(this.$route.params.pathParams).accountId,this.axiosbusiness.getList(this,{countUrl:"/assess/count",listUrl:"/assess/list",data:"assessList",success:function(){!e.params.age&&(e.params.age=null)}},this.params)},add:function(s){this.addAssessModel=!0},addCancel:function(){this.addLoading||(this.addAssessModel=!1,this.$refs.addAssess.resetFields())},addSure:function(){this.addAssess.accountId=JSON.parse(this.$route.params.pathParams).accountId,this.axiosbusiness.add(this,{ref:"addAssess",url:"/assess/add",requestObject:"addAssess",loading:"addLoading",showModel:"addAssessModel"})},update:function(s){this.updateAssessModel=!0,this.updateAssess.assessId=s.assessId,this.axiosbusiness.get(this,{url:"/assess/load?assessId="+s.assessId,data:"updateAssess"})},updateCancel:function(){this.updateLoading||(this.updateAssessModel=!1,this.$refs.updateAssess.resetFields())},updateSure:function(){delete this.updateAssess.account,this.axiosbusiness.update(this,{ref:"updateAssess",url:"/assess/update",requestObject:"updateAssess",loading:"updateLoading",showModel:"updateAssessModel"})},delete:function(s){this.deleteAssess={assessId:s.assessId},this.axiosbusiness.delete(this,{url:"/assess/delete",requestObject:"deleteAssess"})}},created:function(){this.selectPage(JSON.parse(this.$route.params.pathParams).currentPage)},mounted:function(){}},n={render:function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",{staticClass:"body-wrap"},[a("div",{staticClass:"body-btn-wrap"},[a("Button",{attrs:{type:"primary"},on:{click:s.add}},[s._v("增加测评")]),s._v(" "),a("div",{staticClass:"search-wrap"},[a("InputNumber",{staticClass:"search-wrap-input",attrs:{max:200,min:0,precision:0,placeholder:"年龄"},model:{value:s.params.age,callback:function(e){s.$set(s.params,"age",e)},expression:"params.age"}}),s._v(" "),a("Select",{staticClass:"search-wrap-input",attrs:{transfer:"",placeholder:"性别，全部"},model:{value:s.params.sex,callback:function(e){s.$set(s.params,"sex",e)},expression:"params.sex"}},s._l(s.sexParamsList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[s._v(s._s(e.value))])})),s._v(" "),a("Button",{attrs:{type:"info"},on:{click:s.search}},[s._v("查询")])],1)],1),s._v(" "),a("Modal",{attrs:{title:"新增测评管理",closable:!1,"mask-closable":!1,width:"1000px"},model:{value:s.addAssessModel,callback:function(e){s.addAssessModel=e},expression:"addAssessModel"}},[a("Form",{ref:"addAssess",attrs:{model:s.addAssess,"label-width":100,"label-position":"right",rules:s.addAssessRules}},[a("FormItem",{attrs:{prop:"createDate",label:"时间:"}},[a("span",{domProps:{textContent:s._s((new Date).toLocaleDateString())}})])],1),s._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:s.addCancel}},[s._v("取消")]),s._v(" "),a("Button",{attrs:{type:"primary",loading:s.addLoading}},[s.addLoading?a("span",[s._v("Loading...")]):a("span",{on:{click:s.addSure}},[s._v("确定")])])],1)],1),s._v(" "),a("Modal",{attrs:{title:"修改测评管理",closable:!1,"mask-closable":!1,width:"1000px"},model:{value:s.updateAssessModel,callback:function(e){s.updateAssessModel=e},expression:"updateAssessModel"}},[a("Form",{ref:"updateAssess",attrs:{model:s.updateAssess,"label-width":100,"label-position":"right",rules:s.updateAssessRules}},[a("FormItem",{attrs:{prop:"createDate",label:"时间:"}},[a("span",{domProps:{textContent:s._s(s.updateAssess.createDate?s.updateAssess.createDate.substr(0,10):"")}})])],1),s._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:s.updateCancel}},[s._v("取消")]),s._v(" "),a("Button",{attrs:{type:"primary",loading:s.updateLoading}},[s.updateLoading?a("span",[s._v("Loading...")]):a("span",{on:{click:s.updateSure}},[s._v("确定")])])],1)],1),s._v(" "),a("Table",{ref:"table",attrs:{border:"",height:"600",columns:s.assessColumns,data:s.assessList,size:"small"}}),s._v(" "),a("div",{staticStyle:{display:"inline-block",float:"right","margin-top":"10px"}},[a("Page",{ref:"page",staticStyle:{"margin-right":"10px"},attrs:{"show-sizer":"","page-size-opts":s.params.pageSizeOpts,current:s.params.currentPage,total:s.params.total,pageSize:s.params.pageSize,"show-total":!0,"show-elevator":""},on:{"on-page-size-change":s.onPageSizeChange,"on-change":s.selectPage}})],1)],1)},staticRenderFns:[]},o=a("VU/8")(i,n,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=15.d21addf62d2f93c19149.js.map