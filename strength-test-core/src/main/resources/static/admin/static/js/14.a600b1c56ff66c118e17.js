webpackJsonp([14],{"yn7+":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("mvHQ"),r=t.n(a),o={name:"AssessProject",data:function(){var e=this;return{params:{pageSizeOpts:[10,20,50,100,500,1e3],startNum:1,currentPage:1,pageNum:1,pageSize:10,total:0},rankList:[{id:1,value:"不良"},{id:2,value:"未达"},{id:3,value:"合格"},{id:4,value:"良好"},{id:5,value:"优秀"}],rankParamsList:[{id:"",value:"全部"},{id:1,value:"不良"},{id:2,value:"未达"},{id:3,value:"合格"},{id:4,value:"良好"},{id:5,value:"优秀"}],addAssessProjectModel:!1,addLoading:!1,addAssessProjectRules:{score:[{type:"number",required:!0,message:"分数为必填项",trigger:"change"}]},addAssessProject:{score:0},updateAssessProjectModel:!1,updateLoading:!1,updateAssessProjectRules:{score:[{type:"number",required:!0,message:"分数为必填项",trigger:"change"}]},updateAssessProject:{},deleteAssessProject:{},addUnit:"",updateUnit:"",addProjectList:[],updateProjectList:[],projectList:[],assessProjectList:[],assessProjectColumns:[{title:"序号",align:"center",render:function(s,t){return s("span",t.index+(e.params.currentPage-1)*e.params.pageSize+e.params.startNum)}},{title:"单项测评id",key:"assessProjectId",align:"center"},{title:"项目",align:"center",render:function(e,s){return e("div",s.row.project.name)}},{title:"等级",key:"rank",align:"center",render:function(s,t){var a="";return e.rankList.forEach(function(e){e.id==t.row.rank&&(a=e.value)}),s("span",a)}},{title:"结果值",key:"score",align:"center"},{title:"项",key:"item",align:"center"},{title:"创建时间",key:"createDate",sortable:!0,align:"center"},{title:"修改时间",key:"updateDate",sortable:!0,align:"center"},{title:"操作",key:"action",align:"center",render:function(s,t){var a=s("Button",{props:{type:"primary",size:"small"},style:{margin:"5px"},on:{click:function(){e.update(t.row)}}},"编辑");s("Button",{props:{type:"error",size:"small"},style:{margin:"5px"},on:{click:function(){e.delete(t.row)}}},"删除"),s("div","");return s("div",[a])}}]}},methods:{addUnitClick:function(e){this.addUnit=e.unit},updateUnitClick:function(e){this.updateUnit=e.unit},search:function(){this.params.currentPage=1,this.params.pageNum=1,this.getList()},selectPage:function(e){this.params.currentPage=e,this.params.pageNum=(this.params.currentPage-1)*this.params.pageSize+this.params.startNum;var s=r()({currentPage:e,assessId:JSON.parse(this.$route.params.pathParams).assessId});this.$router.push(this.$route.path.substr(0,this.$route.path.indexOf(this.$route.params.pathParams))+s),this.getList()},onPageSizeChange:function(e){this.getList(e)},getProjectList:function(){var e=this;this.params.pageSize=1e6,this.axiosbusiness.getList(this,{countUrl:"/project/count",listUrl:"/project/list",data:"projectList",success:function(){e.addProjectList=JSON.parse(r()(e.projectList)),e.updateProjectList=JSON.parse(r()(e.projectList)),e.params.pageSize=10,e.selectPage(JSON.parse(e.$route.params.pathParams).currentPage),!e.params.age&&(e.params.age=null)}},this.params)},getList:function(e){var s=this;this.params.pageSize=e||this.params.pageSize,this.params.assessId=JSON.parse(this.$route.params.pathParams).assessId,this.axiosbusiness.getList(this,{countUrl:"/assessProject/count",listUrl:"/assessProject/list",data:"assessProjectList",success:function(){!s.params.age&&(s.params.age=null)}},this.params)},add:function(e){this.addAssessProjectModel=!0,this.addAssessProject.projectId=this.projectList.length>0?this.projectList[0].projectId:null,this.addUnit=this.projectList.length>0?this.projectList[0].unit:null},addCancel:function(){this.addLoading||(this.addAssessProjectModel=!1,this.$refs.addAssessProject.resetFields())},addSure:function(){this.addAssessProject.assessId=JSON.parse(this.$route.params.pathParams).assessId,this.axiosbusiness.add(this,{ref:"addAssessProject",url:"/assessProject/add",requestObject:"addAssessProject",loading:"addLoading",showModel:"addAssessProjectModel"})},update:function(e){var s=this;this.projectList.forEach(function(t){t.projectId==e.projectId&&(s.updateUnit=t.unit)}),this.updateAssessProjectModel=!0,this.updateAssessProject.assessProjectId=e.assessProjectId,this.updateAssessProject.projectId=e.projectId,this.axiosbusiness.get(this,{url:"/assessProject/load?assessProjectId="+e.assessProjectId,data:"updateAssessProject"})},updateCancel:function(){this.updateLoading||(this.updateAssessProjectModel=!1,this.$refs.updateAssessProject.resetFields())},updateSure:function(){delete this.updateAssessProject.project,delete this.updateAssessProject.assess,delete this.updateAssessProject.standard,this.axiosbusiness.update(this,{ref:"updateAssessProject",url:"/assessProject/update",requestObject:"updateAssessProject",loading:"updateLoading",showModel:"updateAssessProjectModel"})},delete:function(e){this.deleteAssessProject={assessProjectId:e.assessProjectId},this.axiosbusiness.delete(this,{url:"/assessProject/delete",requestObject:"deleteAssessProject"})}},created:function(){this.getProjectList()},computed:{addAssessProjectProjectId:function(){return this.addAssessProject.projectId}},watch:{addAssessProjectProjectId:function(e){console.log(e)}},mounted:function(){}},i={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"body-wrap"},[t("div",{staticClass:"body-btn-wrap"},[t("div",{staticClass:"search-wrap"},[t("Select",{staticClass:"search-wrap-input",attrs:{transfer:"",placeholder:"项目，全部"},model:{value:e.params.projectId,callback:function(s){e.$set(e.params,"projectId",s)},expression:"params.projectId"}},e._l(e.projectList,function(s){return t("Option",{key:s.projectId,attrs:{value:s.projectId}},[e._v(e._s(s.name))])})),e._v(" "),t("Select",{staticClass:"search-wrap-input",attrs:{transfer:"",placeholder:"等级，全部"},model:{value:e.params.rank,callback:function(s){e.$set(e.params,"rank",s)},expression:"params.rank"}},e._l(e.rankParamsList,function(s){return t("Option",{key:s.id,attrs:{value:s.id}},[e._v(e._s(s.value))])})),e._v(" "),t("Button",{attrs:{type:"info"},on:{click:e.search}},[e._v("查询")])],1)]),e._v(" "),t("Modal",{attrs:{title:"新增单项测评管理",closable:!1,"mask-closable":!1,width:"1000px"},model:{value:e.addAssessProjectModel,callback:function(s){e.addAssessProjectModel=s},expression:"addAssessProjectModel"}},[t("Form",{ref:"addAssessProject",attrs:{model:e.addAssessProject,"label-width":100,"label-position":"right",rules:e.addAssessProjectRules}},[t("FormItem",{attrs:{prop:"projectId",label:"项目:"}},[t("RadioGroup",{attrs:{type:"button"},model:{value:e.addAssessProject.projectId,callback:function(s){e.$set(e.addAssessProject,"projectId",s)},expression:"addAssessProject.projectId"}},e._l(e.projectList,function(s){return t("span",{on:{click:function(t){e.addUnitClick(s)}}},[t("Radio",{key:s.projectId,staticStyle:{margin:"5px"},attrs:{label:s.projectId,value:s.projectId}},[e._v("\n                  "+e._s(s.name)+"\n              ")])],1)}))],1),e._v(" "),t("FormItem",{attrs:{prop:"score",label:"结果值:"}},[t("InputNumber",{attrs:{max:1e9,min:-9999999,precision:2},model:{value:e.addAssessProject.score,callback:function(s){e.$set(e.addAssessProject,"score",s)},expression:"addAssessProject.score"}}),e._v("\n            "+e._s(e.addUnit)+"\n        ")],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{on:{click:e.addCancel}},[e._v("取消")]),e._v(" "),t("Button",{attrs:{type:"primary",loading:e.addLoading}},[e.addLoading?t("span",[e._v("Loading...")]):t("span",{on:{click:e.addSure}},[e._v("确定")])])],1)],1),e._v(" "),t("Modal",{attrs:{title:"修改单项测评管理",closable:!1,"mask-closable":!1,width:"1000px"},model:{value:e.updateAssessProjectModel,callback:function(s){e.updateAssessProjectModel=s},expression:"updateAssessProjectModel"}},[t("Form",{ref:"updateAssessProject",attrs:{model:e.updateAssessProject,"label-width":100,"label-position":"right",rules:e.updateAssessProjectRules}},[t("FormItem",{attrs:{prop:"projectId",label:"项目:"}},[t("RadioGroup",{attrs:{type:"button"},model:{value:e.updateAssessProject.projectId,callback:function(s){e.$set(e.updateAssessProject,"projectId",s)},expression:"updateAssessProject.projectId"}},e._l(e.projectList,function(s){return t("span",{on:{click:function(t){e.updateUnitClick(s)}}},[t("Radio",{key:s.projectId,staticStyle:{margin:"5px"},attrs:{label:s.projectId,value:s.projectId}},[e._v("\n                  "+e._s(s.name)+"\n              ")])],1)}))],1),e._v(" "),t("FormItem",{attrs:{prop:"score",label:"结果值:"}},[t("InputNumber",{attrs:{max:1e9,min:-9999999,precision:2},model:{value:e.updateAssessProject.score,callback:function(s){e.$set(e.updateAssessProject,"score",s)},expression:"updateAssessProject.score"}}),e._v("\n            "+e._s(e.updateUnit)+"\n        ")],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{on:{click:e.updateCancel}},[e._v("取消")]),e._v(" "),t("Button",{attrs:{type:"primary",loading:e.updateLoading}},[e.updateLoading?t("span",[e._v("Loading...")]):t("span",{on:{click:e.updateSure}},[e._v("确定")])])],1)],1),e._v(" "),t("Table",{ref:"table",attrs:{border:"",height:"600",columns:e.assessProjectColumns,data:e.assessProjectList,size:"small"}}),e._v(" "),t("div",{staticStyle:{display:"inline-block",float:"right","margin-top":"10px"}},[t("Page",{ref:"page",staticStyle:{"margin-right":"10px"},attrs:{"show-sizer":"","page-size-opts":e.params.pageSizeOpts,current:e.params.currentPage,total:e.params.total,pageSize:e.params.pageSize,"show-total":!0,"show-elevator":""},on:{"on-page-size-change":e.onPageSizeChange,"on-change":e.selectPage}})],1)],1)},staticRenderFns:[]},d=t("VU/8")(o,i,!1,null,null,null);s.default=d.exports}});
//# sourceMappingURL=14.a600b1c56ff66c118e17.js.map