webpackJsonp([1],{Gari:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("b1KW"),a=n("mvHQ"),s=n.n(a),o={name:"LeftBar",data:function(){return{isCollapsed:!1,menu:{},menuActiveName:"/main/"}},computed:{menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]}},methods:{menuSelect:function(t){var e=this;this.$router.push(t),this.menuActiveName=t,setTimeout(function(){e.Hub.$emit("navroad",e.$router.currentRoute)},200)},initMenu:function(){var t=s()(this.pathParams);this.menu={config:{welcome:"/main/welcome/"+t,config:"/main/config/"+t},project:{project:"/main/project/"+t,standard:"/main/standard/"+t},finance:{finance:"/main/finance/"+t},rolePermission:{role:"/main/role/"+t}}}},watch:{},created:function(){var t=this;this.isSuperAdmin=this.business.getIsSuperAdmin(),this.pathParams={currentPage:1},this.initMenu(),this.Hub.$on("routerChange",function(e){t.$nextTick(function(){t.menuSelect(e)})}),this.Hub.$on("isCollapsed",function(e){t.$nextTick(function(){t.isCollapsed=e})})}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Sider",[n("Menu",{staticClass:"leftbar-wrap",class:t.menuitemClasses,attrs:{"active-name":t.menuActiveName,theme:"light"},on:{"on-select":t.menuSelect}},[n("Submenu",{attrs:{name:"config"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"ios-settings"}}),t._v(" "),n("span",[t._v("配置管理")])],1),t._v(" "),n("MenuItem",{attrs:{name:t.menu.config.welcome}},[n("Icon",{attrs:{type:"logo-twitter"}}),t._v(" "),n("span",[t._v("欢迎页")])],1),t._v(" "),t.isSuperAdmin?n("MenuItem",{attrs:{name:t.menu.config.config}},[n("Icon",{attrs:{type:"md-medical"}}),t._v(" "),n("span",[t._v("平台配置")])],1):t._e()],2),t._v(" "),n("Submenu",{attrs:{name:"project"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"ios-paper"}}),t._v(" "),n("span",[t._v("项目管理")])],1),t._v(" "),t.isSuperAdmin?n("MenuItem",{attrs:{name:t.menu.project.project}},[n("Icon",{attrs:{type:"ios-paper-outline"}}),t._v(" "),n("span",[t._v("项目")])],1):t._e(),t._v(" "),t.isSuperAdmin?n("MenuItem",{attrs:{name:t.menu.project.standard}},[n("Icon",{attrs:{type:"md-paper"}}),t._v(" "),n("span",[t._v("标准")])],1):t._e()],2),t._v(" "),n("MenuItem",{attrs:{name:"/main/account/selfAccount"}},[n("Icon",{attrs:{type:"ios-man"}}),t._v(" "),n("span",[t._v("个人信息")])],1),t._v(" "),n("Submenu",{attrs:{name:"teacherAccount"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"md-person"}}),t._v(" "),n("span",[t._v("账户管理")])],1),t._v(" "),n("MenuItem",{attrs:{name:"/main/account/userAccount"}},[n("Icon",{attrs:{type:"ios-body"}}),t._v(" "),n("span",[t._v("用户")])],1)],2),t._v(" "),t.isSuperAdmin?n("Submenu",{attrs:{name:"managerAccount"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"md-people"}}),t._v(" "),n("span",[t._v("管理员管理")])],1),t._v(" "),n("MenuItem",{attrs:{name:"/main/account/managerAccount"}},[n("Icon",{attrs:{type:"md-people"}}),t._v(" "),n("span",[t._v("管理员管理")])],1)],2):t._e(),t._v(" "),t.isSuperAdmin?n("Submenu",{attrs:{name:"rolePermission"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"ios-people"}}),t._v(" "),n("span",[t._v("角色权限管理")])],1),t._v(" "),n("MenuItem",{attrs:{name:t.menu.rolePermission.role}},[n("Icon",{attrs:{type:"ios-man"}}),t._v(" "),n("span",[t._v("角色")])],1),t._v(" "),n("MenuItem",{attrs:{name:"/main/permission"}},[n("Icon",{attrs:{type:"md-sunny"}}),t._v(" "),n("span",[t._v("权限")])],1)],2):t._e(),t._v(" "),t.isSuperAdmin?n("Submenu",{attrs:{name:"system"}},[n("template",{slot:"title"},[n("Icon",{attrs:{type:"ios-people"}}),t._v(" "),n("span",[t._v("系统管理")])],1),t._v(" "),n("MenuItem",{attrs:{name:"/main/system/druid"}},[n("Icon",{attrs:{type:"ios-man"}}),t._v(" "),n("span",[t._v("数据库监控")])],1),t._v(" "),n("MenuItem",{attrs:{name:"/main/system/swagger"}},[n("Icon",{attrs:{type:"ios-man"}}),t._v(" "),n("span",[t._v("API接口管理(swagger)")])],1)],2):t._e()],1)],1)},staticRenderFns:[]};var c=n("VU/8")(o,r,!1,function(t){n("RoWJ")},null,null).exports,l={name:"RightBody",created:function(){var t=this;this.Hub.$on("isCollapsed",function(e){t.$nextTick(function(){t.isCollapsed=e,t.isCollapsed?t.marginLeft="78px":t.marginLeft="260px",t.isCollapsed?t.headerWidth="calc(100% - 78px)":t.headerWidth="calc(100% - 260px)",console.log(t.isCollapsed)})}),this.Hub.$on("navroad",function(e){t.$nextTick(function(){var n={iscurrent:!0,name:e.name,path:e.path};t.navList.forEach(function(t){t.iscurrent=!1}),t.navList.forEach(function(e){e.name==n.name&&t.navList.splice(t.navList.indexOf(e),1)}),t.navList.push(n),t.navforward()})})},data:function(){return{navList:[],isCollapsed:!1,marginLeft:"",transition:"all 0.2s",headerWidth:"",navroadMarginLeft:0}},methods:{goBack:function(){var t=this;this.$router.back(),setTimeout(function(){t.Hub.$emit("routerChange",t.$router.history.current.fullPath)},200)},goNav:function(t){this.navList.forEach(function(e){e.iscurrent=!1,e.name==t.name&&(e.iscurrent=!0)}),this.$router.push(t.path)},deleteTag:function(t){this.navList.splice(this.navList.indexOf(t),1)},navforward:function(){Math.abs(this.navroadMarginLeft)+this.$refs.road.offsetWidth<this.$refs.navroad.offsetWidth+200&&(this.navroadMarginLeft-=this.$refs.road.offsetWidth/2,console.log(this.navroadMarginLeft))},navbackward:function(){this.navroadMarginLeft<0&&(this.navroadMarginLeft+=this.$refs.road.offsetWidth/2)}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{staticClass:"rightbody-wrap",style:{marginLeft:t.marginLeft,transition:t.transition}},[n("div",{staticClass:"rightbody-header",style:{width:t.headerWidth,transition:t.transition}},[n("Button",{staticClass:"rightbody-header-left",attrs:{type:"text",icon:"ios-skip-backward"},on:{click:t.navbackward}}),t._v(" "),n("div",{ref:"road",staticClass:"rightbody-header-body-wrap"},[n("div",{ref:"navroad",staticClass:"rightbody-header-body",style:{marginLeft:t.navroadMarginLeft+"px",transition:t.transition}},t._l(t.navList,function(e){return n("div",{staticClass:"rightbody-header-body-item-wrap",style:{borderLeft:e.iscurrent?"3px solid #8e30d6":"1px solid #fff"}},[n("div",{staticClass:"rightbody-header-body-item",on:{click:function(n){t.goNav(e)}}},[n("div",{staticClass:"rightbody-header-body-item-name",domProps:{textContent:t._s(e.name)}})]),t._v(" "),n("div",{staticClass:"rightbody-header-body-item-close",on:{click:function(n){t.deleteTag(e)}}},[n("Icon",{attrs:{type:"md-close"}})],1)])}))]),t._v(" "),n("Button",{staticClass:"rightbody-header-right",attrs:{type:"text",icon:"ios-skip-forward"},on:{click:t.navforward}})],1),t._v(" "),n("content",{staticClass:"rightbody-content"},[n("div",{staticStyle:{display:"inline-block","line-height":"20px"}},[n("Button",{attrs:{type:"error",size:"small"},on:{click:t.goBack}},[n("Icon",{attrs:{type:"ios-arrow-back"}})],1)],1),t._v(" "),n("Breadcrumb",{staticClass:"rightbody-content-crumb"},[n("BreadcrumbItem",[t._v("主页")]),t._v(" "),n("BreadcrumbItem",[t._v(" "+t._s(t.$route.name))])],1),t._v(" "),n("Card",{staticClass:"rightbody-content-body"},[n("div",{staticStyle:{height:"auto"}},[n("router-view")],1)])],1)])},staticRenderFns:[]};var d=n("VU/8")(l,u,!1,function(t){n("Z2Qw")},null,null).exports,m={name:"Main",components:{TopBar:i.a,LeftBar:c,RightBody:d},data:function(){return{islogin:!1}},methods:{getIslogin:function(t){console.log(t)}},created:function(){}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("top-bar",{attrs:{islogin:this.getIslogin}}),this._v(" "),e("div",{staticClass:"main-wrap"},[e("left-bar"),this._v(" "),e("right-body")],1)],1)},staticRenderFns:[]};var p=n("VU/8")(m,h,!1,function(t){n("X7wk")},null,null);e.default=p.exports},RoWJ:function(t,e){},X7wk:function(t,e){},Z2Qw:function(t,e){},b1KW:function(t,e,n){"use strict";var i={name:"TopBar",created:function(){this.routerPath=this.$route.path,(this.routerPath.indexOf("/main")>-1||this.routerPath.indexOf("/login")>-1||this.routerPath.indexOf("/register")>-1)&&this.getIslogin(),this.getConfig()},watch:{},data:function(){return{routerPath:this.$route.path,islogin:!1,account:{},isCollapsed:!1,config:{}}},computed:{rotateIcon:function(){return["menu-icon",this.isCollapsed?"rotate-icon":""]},topbarWidth:function(){return this.isCollapsed?"76px":"260px"},titleFontSize:function(){return this.isCollapsed?"0rem":"2rem"},titleMarginLeft:function(){return this.isCollapsed?"0.2rem":"2rem"}},methods:{collapsedSider:function(){this.isCollapsed=!this.isCollapsed,this.Hub.$emit("isCollapsed",this.isCollapsed)},gologinpage:function(){this.$router.push("/login")},getConfig:function(){var t=this;this.axios({method:"get",url:"/config/list",withCredentials:!0}).then(function(e){200==e.data.code&&(t.config=e.data.data[0],document.querySelector("title").innerText=t.config.platformName)}).catch(function(t){})},loginout:function(){var t=this;this.$Modal.confirm({title:"退出登陆？",content:"<p>确定退出登陆吗？</p>",onOk:function(){t.axios({method:"post",url:"/account/loginout?accountId="+t.business.getAccount().accountId,withCredentials:!0}).then(function(e){console.log(e),200==e.data.code?(t.islogin=!0,sessionStorage.clear(),t.$emit("islogin",t.islogin),t.$Message.success("退出成功！"),t.$router.push("/login")):(t.$emit("islogin",t.islogin),t.$Message.error("失败"))}).catch(function(e){t.$Message.error("系统异常")})},onCancel:function(){t.$Message.success("取消成功！")}})},getIslogin:function(){var t=this;if(!sessionStorage.getItem("account"))return sessionStorage.clear(),this.$emit("islogin",this.islogin),void((this.routerPath.indexOf("/main")>-1||this.routerPath.indexOf("/login")>-1)&&this.$nextTick(function(){t.$router.push("/login")}));this.axios({method:"post",url:"/account/islogin",withCredentials:!0}).then(function(e){console.log(e),200==e.data.code?(t.islogin=!0,t.account=e.data.data[0],t.$emit("islogin",t.islogin)):(sessionStorage.clear(),t.$emit("islogin",t.islogin),t.$router.push("/login"),t.$Message.info("请登录"))}).catch(function(e){t.$Message.error("系统异常")})}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topbar"},[n("div",{staticClass:"topbar-left",style:{width:t.topbarWidth}},[n("span",{staticClass:"topbar-left-title",staticStyle:{"font-size":"2rem","line-height":"6rem","margin-left":"2rem"},style:{fontSize:t.titleFontSize,marginLeft:t.titleMarginLeft},domProps:{textContent:t._s(t.config.platformName||"")}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.account.accountId,expression:"account.accountId"}],staticStyle:{display:"inline-block",height:"82px","vertical-align":"top","line-height":"82px"}},[n("Icon",{class:t.rotateIcon,style:{margin:"0 20px"},attrs:{type:"md-menu",size:"50"},nativeOn:{click:function(e){return t.collapsedSider(e)}}})],1),t._v(" "),t.islogin?n("div",{staticClass:"topbar-right"},[n("span",{staticClass:"topbar-right-logintext",staticStyle:{color:"#ccc"},domProps:{textContent:t._s(t.account.realname||t.account.nickname||t.account.phone)}}),t._v(" "),n("Button",{staticClass:"topbar-right-loginout",attrs:{type:"text"},on:{click:t.loginout}},[t._v("退出")])],1):t._e()])},staticRenderFns:[]};var s=n("VU/8")(i,a,!1,function(t){n("foFE")},null,null);e.a=s.exports},foFE:function(t,e){}});
//# sourceMappingURL=1.85f492db03e823934276.js.map