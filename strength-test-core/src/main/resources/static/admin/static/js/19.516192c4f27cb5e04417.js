webpackJsonp([19],{NIdF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("mvHQ"),i=a.n(r),l={name:"Article",data:function(){var t=this;return{params:{pageSizeOpts:[10,20,50,100,500,1e3],startNum:1,currentPage:1,pageNum:1,pageSize:10,total:0},statusList:[{id:1,value:"上架"},{id:2,value:"下架"}],addArticleModel:!1,addLoading:!1,addArticleRules:{title:[{required:!0,message:"名称为必填项",trigger:"blur"}]},addArticle:{title:"",subtitle:"",imgAddress:"",redirectUrl:"",status:1,content:"",articleCateId:""},updateArticleModel:!1,updateLoading:!1,updateArticleRules:{title:[{required:!0,message:"名称为必填项",trigger:"blur"}]},updateArticle:{},deleteArticle:{},articleCateList:[],articleList:[],articleColumns:[{title:"序号",align:"center",render:function(e,a){return e("span",a.index+(t.params.currentPage-1)*t.params.pageSize+t.params.startNum)}},{title:"文章id",key:"articleId",align:"center"},{title:"文章名称",align:"center",render:function(t,e){return t("span",e.row.title.substr(0,10))}},{title:"文章子标题",align:"center",render:function(t,e){return t("span",e.row.subtitle.substr(0,10))}},{title:"来源",key:"resource",align:"center"},{title:"封面",key:"imgAddress",align:"center",render:function(t,e){return t("img",{attrs:{src:e.row.imgAddress},style:{width:"45px"}})}},{title:"跳转url",key:"redirectUrl",align:"center"},{title:"阅读数",key:"readingNumber",align:"center"},{title:"状态",key:"status",align:"center",render:function(e,a){var r="";return t.statusList.forEach(function(t){t.id==a.row.status&&(r=t.value)}),e("span",r)}},{title:"创建时间",key:"createDate",sortable:!0,align:"center"},{title:"修改时间",key:"updateDate",sortable:!0,align:"center"},{title:"操作",key:"action",align:"center",render:function(e,a){var r=e("Button",{props:{type:"primary",size:"small"},style:{marginLeft:"10px"},on:{click:function(){t.update(a.row)}}},"编辑"),i=e("Button",{props:{type:"error",size:"small"},style:{marginLeft:"10px"},on:{click:function(){t.delete(a.row)}}},"删除");e("div","");return e("div",[r,i])}}]}},methods:{selectPage:function(t){this.params.currentPage=t,this.params.pageNum=(this.params.currentPage-1)*this.params.pageSize+this.params.startNum;var e=i()({currentPage:t});this.$router.push(this.$route.path.substr(0,this.$route.path.indexOf(this.$route.params.pathParams))+e),this.getList()},onPageSizeChange:function(t){this.getList(t)},getAddImgAddress:function(t){this.addArticle.imgAddress=t[0].url},getUpdateImgAddress:function(t){this.updateArticle.imgAddress=t[0].url},getAddEditor:function(t){this.addArticle.content=t},getUpdateEditor:function(t){this.updateArticle.content=t},getArticleCateList:function(){var t=this;this.params.pageSize=1e6,this.axiosbusiness.getList(this,{countUrl:"/articleCate/count",listUrl:"/articleCate/list",data:"articleCateList",success:function(){t.params.pageSize=10,t.selectPage(JSON.parse(t.$route.params.pathParams).currentPage)}},this.params)},getList:function(t){this.params.pageSize=t||this.params.pageSize,this.axiosbusiness.getList(this,{countUrl:"/article/count",listUrl:"/article/list",data:"articleList"},this.params)},add:function(t){this.addArticleModel=!0,this.addArticle.content=" ",this.addArticle.articleCateId=this.articleCateList.length>0?this.articleCateList[0].articleCateId:null},addCancel:function(){this.addLoading||(this.addArticleModel=!1,this.$refs.addArticle.resetFields())},addSure:function(){this.axiosbusiness.add(this,{ref:"addArticle",url:"/article/add",requestObject:"addArticle",loading:"addLoading",showModel:"addArticleModel"})},update:function(t){this.updateArticleModel=!0,this.updateArticle.articleId=t.articleId,this.updateArticle.articleCateId=t.articleCateId,this.axiosbusiness.get(this,{url:"/article/load?articleId="+t.articleId,data:"updateArticle"})},updateCancel:function(){this.updateLoading||(this.updateArticleModel=!1,this.$refs.updateArticle.resetFields())},updateSure:function(){this.axiosbusiness.update(this,{ref:"updateArticle",url:"/article/update",requestObject:"updateArticle",loading:"updateLoading",showModel:"updateArticleModel"})},delete:function(t){this.deleteArticle={articleId:t.articleId},this.axiosbusiness.delete(this,{url:"/article/delete",requestObject:"deleteArticle"})}},created:function(){this.getArticleCateList()},mounted:function(){}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body-wrap"},[a("div",{staticClass:"body-btn-wrap"},[a("Button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("增加文章")])],1),t._v(" "),a("Modal",{attrs:{title:"新增文章管理",closable:!1,"mask-closable":!1,width:"1000px"},model:{value:t.addArticleModel,callback:function(e){t.addArticleModel=e},expression:"addArticleModel"}},[a("Form",{ref:"addArticle",attrs:{model:t.addArticle,"label-width":100,"label-position":"right",rules:t.addArticleRules}},[a("FormItem",{attrs:{prop:"articleCateId",label:"文章类型:"}},[a("Select",{staticStyle:{width:"100px"},attrs:{size:"large"},model:{value:t.addArticle.articleCateId,callback:function(e){t.$set(t.addArticle,"articleCateId",e)},expression:"addArticle.articleCateId"}},t._l(t.articleCateList,function(e){return a("Option",{key:e.articleCateId,attrs:{value:e.articleCateId}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("FormItem",{attrs:{prop:"title",label:"标题:"}},[a("Input",{attrs:{type:"text",placeholder:"标题"},model:{value:t.addArticle.title,callback:function(e){t.$set(t.addArticle,"title",e)},expression:"addArticle.title"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"subtitle",label:"子标题:"}},[a("Input",{attrs:{type:"text",placeholder:"子标题"},model:{value:t.addArticle.subtitle,callback:function(e){t.$set(t.addArticle,"subtitle",e)},expression:"addArticle.subtitle"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"resource",label:"来源:"}},[a("Input",{attrs:{type:"text",placeholder:"来源"},model:{value:t.addArticle.resource,callback:function(e){t.$set(t.addArticle,"resource",e)},expression:"addArticle.resource"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"imgAddress",label:"封面(上传或者填写):"}},[a("my-upload",{attrs:{defaultUpload:t.addArticle.imgAddress},on:{uploadList:t.getAddImgAddress}}),t._v(" "),a("div",[a("Input",{attrs:{type:"text",placeholder:"封面"},model:{value:t.addArticle.imgAddress,callback:function(e){t.$set(t.addArticle,"imgAddress",e)},expression:"addArticle.imgAddress"}}),t._v(" "),a("img",{staticStyle:{width:"300px"},attrs:{src:t.addArticle.imgAddress,alt:""}})],1)],1),t._v(" "),a("FormItem",{attrs:{prop:"redirectUrl",label:"跳转url:"}},[a("Input",{attrs:{type:"text",placeholder:"跳转url"},model:{value:t.addArticle.redirectUrl,callback:function(e){t.$set(t.addArticle,"redirectUrl",e)},expression:"addArticle.redirectUrl"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"status",label:"状态:"}},[a("Select",{staticStyle:{width:"100px"},attrs:{transfer:"",size:"large"},model:{value:t.addArticle.status,callback:function(e){t.$set(t.addArticle,"status",e)},expression:"addArticle.status"}},t._l(t.statusList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.value))])}))],1),t._v(" "),a("FormItem",{attrs:{prop:"content",label:"内容:"}},[a("my-wangeditor",{attrs:{content:t.addArticle.content},on:{getWangEditorContent:t.getAddEditor}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.addCancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.addLoading}},[t.addLoading?a("span",[t._v("Loading...")]):a("span",{on:{click:t.addSure}},[t._v("确定")])])],1)],1),t._v(" "),a("Modal",{attrs:{title:"修改文章管理",closable:!1,"mask-closable":!1,width:"1000px"},model:{value:t.updateArticleModel,callback:function(e){t.updateArticleModel=e},expression:"updateArticleModel"}},[a("Form",{ref:"updateArticle",attrs:{model:t.updateArticle,"label-width":100,"label-position":"right",rules:t.updateArticleRules}},[a("FormItem",{attrs:{prop:"articleCateId",label:"文章类型:"}},[a("Select",{staticStyle:{width:"100px"},attrs:{size:"large"},model:{value:t.updateArticle.articleCateId,callback:function(e){t.$set(t.updateArticle,"articleCateId",e)},expression:"updateArticle.articleCateId"}},t._l(t.articleCateList,function(e){return a("Option",{key:e.articleCateId,attrs:{value:e.articleCateId}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("FormItem",{attrs:{prop:"title",label:"标题:"}},[a("Input",{attrs:{type:"text",placeholder:"标题"},model:{value:t.updateArticle.title,callback:function(e){t.$set(t.updateArticle,"title",e)},expression:"updateArticle.title"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"subtitle",label:"子标题:"}},[a("Input",{attrs:{type:"text",placeholder:"子标题"},model:{value:t.updateArticle.subtitle,callback:function(e){t.$set(t.updateArticle,"subtitle",e)},expression:"updateArticle.subtitle"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"resource",label:"来源:"}},[a("Input",{attrs:{type:"text",placeholder:"来源"},model:{value:t.updateArticle.resource,callback:function(e){t.$set(t.updateArticle,"resource",e)},expression:"updateArticle.resource"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"imgAddress",label:"封面(上传或者填写):"}},[a("my-upload",{attrs:{defaultUpload:t.updateArticle.imgAddress},on:{uploadList:t.getUpdateImgAddress}}),t._v(" "),a("div",[a("Input",{attrs:{type:"text",placeholder:"封面"},model:{value:t.updateArticle.imgAddress,callback:function(e){t.$set(t.updateArticle,"imgAddress",e)},expression:"updateArticle.imgAddress"}}),t._v(" "),a("img",{staticStyle:{width:"300px"},attrs:{src:t.updateArticle.imgAddress,alt:""}})],1)],1),t._v(" "),a("FormItem",{attrs:{prop:"redirectUrl",label:"跳转url:"}},[a("Input",{attrs:{type:"text",placeholder:"跳转url"},model:{value:t.updateArticle.redirectUrl,callback:function(e){t.$set(t.updateArticle,"redirectUrl",e)},expression:"updateArticle.redirectUrl"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"status",label:"状态:"}},[a("Select",{staticStyle:{width:"100px"},attrs:{transfer:"",size:"large"},model:{value:t.updateArticle.status,callback:function(e){t.$set(t.updateArticle,"status",e)},expression:"updateArticle.status"}},t._l(t.statusList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.value))])}))],1),t._v(" "),a("FormItem",{attrs:{prop:"content",label:"内容:"}},[a("my-wangeditor",{attrs:{content:t.updateArticle.content},on:{getWangEditorContent:t.getUpdateEditor}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.updateCancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.updateLoading}},[t.updateLoading?a("span",[t._v("Loading...")]):a("span",{on:{click:t.updateSure}},[t._v("确定")])])],1)],1),t._v(" "),a("Table",{ref:"table",attrs:{border:"",height:"600",columns:t.articleColumns,data:t.articleList,size:"small"}}),t._v(" "),a("div",{staticStyle:{display:"inline-block",float:"right","margin-top":"10px"}},[a("Page",{ref:"page",staticStyle:{"margin-right":"10px"},attrs:{"show-sizer":"","page-size-opts":t.params.pageSizeOpts,current:t.params.currentPage,total:t.params.total,pageSize:t.params.pageSize,"show-total":!0,"show-elevator":""},on:{"on-page-size-change":t.onPageSizeChange,"on-change":t.selectPage}})],1)],1)},staticRenderFns:[]},d=a("VU/8")(l,s,!1,null,null,null);e.default=d.exports}});
//# sourceMappingURL=19.516192c4f27cb5e04417.js.map