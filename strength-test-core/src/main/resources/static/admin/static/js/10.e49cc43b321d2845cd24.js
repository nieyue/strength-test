webpackJsonp([10],{MP4v:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("mvHQ"),o=a.n(r),s={name:"Project",data:function(){var t=this;return{params:{pageSizeOpts:[10,20,50,100,500,1e3],startNum:1,currentPage:1,pageNum:1,pageSize:10,total:0},addProjectModel:!1,addLoading:!1,addProjectRules:{name:[{required:!0,message:"名称为必填项",trigger:"blur"}]},addProject:{name:"",icon:""},updateProjectModel:!1,updateLoading:!1,updateProjectRules:{name:[{required:!0,message:"名称为必填项",trigger:"blur"}]},updateProject:{projectId:1,name:""},deleteProject:{},projectList:[],projectColumns:[{title:"序号",align:"center",render:function(e,a){return e("span",a.index+(t.params.currentPage-1)*t.params.pageSize+t.params.startNum)}},{title:"项目id",key:"projectId",align:"center"},{title:"名称",key:"name",align:"center"},{title:"图标",key:"icon",align:"center",render:function(t,e){return t("img",{attrs:{src:e.row.icon},style:{width:"45px"}})}},{title:"单位",key:"unit",align:"center"},{title:"简介",key:"summary",align:"center"},{title:"修改时间",key:"updateDate",sortable:!0,align:"center"},{title:"操作",key:"action",align:"center",render:function(e,a){var r=e("Button",{props:{type:"primary",size:"small"},style:{marginLeft:"10px"},on:{click:function(){t.update(a.row)}}},"编辑"),o=e("Button",{props:{type:"error",size:"small"},style:{marginLeft:"10px"},on:{click:function(){t.delete(a.row)}}},"删除");e("div","");return e("div",[r,o])}}]}},methods:{selectPage:function(t){this.params.currentPage=t,this.params.pageNum=(this.params.currentPage-1)*this.params.pageSize+this.params.startNum;var e=o()({currentPage:t,accountId:JSON.parse(this.$route.params.pathParams).accountId});this.$router.push(this.$route.path.substr(0,this.$route.path.indexOf(this.$route.params.pathParams))+e),this.getList()},getAddIcon:function(t){this.addProject.icon=t[0].url},getUpdateIcon:function(t){this.updateProject.icon=t[0].url},onPageSizeChange:function(t){this.getList(t)},getList:function(t){this.params.pageSize=t||this.params.pageSize,this.axiosbusiness.getList(this,{countUrl:"/project/count",listUrl:"/project/list",data:"projectList"},this.params)},add:function(t){this.addProjectModel=!0,this.addProject.name=t.name},addCancel:function(){this.addLoading||(this.addProjectModel=!1,this.$refs.addProject.resetFields())},addSure:function(){this.axiosbusiness.add(this,{ref:"addProject",url:"/project/add",requestObject:"addProject",loading:"addLoading",showModel:"addProjectModel"})},update:function(t){this.updateProjectModel=!0,this.updateProject.name=t.name,this.updateProject.icon=t.icon,this.updateProject.unit=t.unit,this.updateProject.summary=t.summary,this.updateProject.projectId=t.projectId},updateCancel:function(){this.updateLoading||(this.updateProjectModel=!1,this.$refs.updateProject.resetFields())},updateSure:function(){this.axiosbusiness.update(this,{ref:"updateProject",url:"/project/update",requestObject:"updateProject",loading:"updateLoading",showModel:"updateProjectModel"})},delete:function(t){this.deleteProject={projectId:t.projectId},this.axiosbusiness.delete(this,{url:"/project/delete",requestObject:"deleteProject"})},deleteBatch:function(){}},watch:{$route:function(t,e){this.selectPage(JSON.parse(this.$route.params.pathParams).currentPage)}},created:function(){this.selectPage(JSON.parse(this.$route.params.pathParams).currentPage)},mounted:function(){}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body-wrap"},[a("div",{staticClass:"body-btn-wrap"},[a("Button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("增加项目")])],1),t._v(" "),a("Modal",{attrs:{title:"新增项目管理",closable:!1,"mask-closable":!1},model:{value:t.addProjectModel,callback:function(e){t.addProjectModel=e},expression:"addProjectModel"}},[a("Form",{ref:"addProject",attrs:{model:t.addProject,"label-width":100,"label-position":"right",rules:t.addProjectRules}},[a("FormItem",{attrs:{prop:"name",label:"名称:"}},[a("Input",{attrs:{type:"text",placeholder:"名称"},model:{value:t.addProject.name,callback:function(e){t.$set(t.addProject,"name",e)},expression:"addProject.name"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"icon",label:"图标(上传或者填写):"}},[a("my-upload",{attrs:{defaultUpload:t.addProject.icon},on:{uploadList:t.getAddIcon}}),t._v(" "),a("div",[a("Input",{attrs:{type:"text",placeholder:"图标"},model:{value:t.addProject.icon,callback:function(e){t.$set(t.addProject,"icon",e)},expression:"addProject.icon"}}),t._v(" "),a("img",{staticStyle:{width:"200px"},attrs:{src:t.addProject.icon,alt:""}})],1)],1),t._v(" "),a("FormItem",{attrs:{prop:"unit",label:"单位:"}},[a("Input",{attrs:{type:"text",placeholder:"单位"},model:{value:t.addProject.unit,callback:function(e){t.$set(t.addProject,"unit",e)},expression:"addProject.unit"}})],1),t._v(" "),a("FormItem",{attrs:{label:"简介:",prop:"summary"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"输入简介。。"},model:{value:t.addProject.summary,callback:function(e){t.$set(t.addProject,"summary",e)},expression:"addProject.summary"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.addCancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.addLoading}},[t.addLoading?a("span",[t._v("Loading...")]):a("span",{on:{click:t.addSure}},[t._v("确定")])])],1)],1),t._v(" "),a("Modal",{attrs:{title:"修改项目管理",closable:!1,"mask-closable":!1},model:{value:t.updateProjectModel,callback:function(e){t.updateProjectModel=e},expression:"updateProjectModel"}},[a("Form",{ref:"updateProject",attrs:{model:t.updateProject,"label-width":100,"label-position":"right",rules:t.updateProjectRules}},[a("FormItem",{attrs:{prop:"name",label:"名称:"}},[a("Input",{attrs:{type:"text",placeholder:"名称"},model:{value:t.updateProject.name,callback:function(e){t.$set(t.updateProject,"name",e)},expression:"updateProject.name"}})],1),t._v(" "),a("FormItem",{attrs:{prop:"icon",label:"图标(上传或者填写):"}},[a("my-upload",{attrs:{defaultUpload:t.updateProject.icon},on:{uploadList:t.getUpdateIcon}}),t._v(" "),a("div",[a("Input",{attrs:{type:"text",placeholder:"图标"},model:{value:t.updateProject.icon,callback:function(e){t.$set(t.updateProject,"icon",e)},expression:"updateProject.icon"}}),t._v(" "),a("img",{staticStyle:{width:"200px"},attrs:{src:t.updateProject.icon,alt:""}})],1)],1),t._v(" "),a("FormItem",{attrs:{prop:"unit",label:"单位:"}},[a("Input",{attrs:{type:"text",placeholder:"单位"},model:{value:t.updateProject.unit,callback:function(e){t.$set(t.updateProject,"unit",e)},expression:"updateProject.unit"}})],1),t._v(" "),a("FormItem",{attrs:{label:"简介:",prop:"summary"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"输入简介。。"},model:{value:t.updateProject.summary,callback:function(e){t.$set(t.updateProject,"summary",e)},expression:"updateProject.summary"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.updateCancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.updateLoading}},[t.updateLoading?a("span",[t._v("Loading...")]):a("span",{on:{click:t.updateSure}},[t._v("确定")])])],1)],1),t._v(" "),a("Table",{ref:"table",attrs:{border:"",columns:t.projectColumns,data:t.projectList,size:"small"}}),t._v(" "),a("div",{staticStyle:{display:"inline-block",float:"right","margin-top":"10px"}},[a("Page",{ref:"page",staticStyle:{"margin-right":"10px"},attrs:{"show-sizer":"","page-size-opts":t.params.pageSizeOpts,current:t.params.currentPage,total:t.params.total,pageSize:t.params.pageSize,"show-total":!0,"show-elevator":""},on:{"on-page-size-change":t.onPageSizeChange,"on-change":t.selectPage}})],1)],1)},staticRenderFns:[]},n=a("VU/8")(s,d,!1,null,null,null);e.default=n.exports}});
//# sourceMappingURL=10.e49cc43b321d2845cd24.js.map