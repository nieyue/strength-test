webpackJsonp([10],{skcS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),i=a.n(r),s={name:"Order",data:function(){var e=this;return{routerPath:this.$route.path,params:{pageSizeOpts:[10,20,50,100,500,1e3],startNum:1,currentPage:1,pageNum:1,pageSize:10,total:0},merTypeParamsList:[{id:"",value:"全部"},{id:1,value:"普通商品"},{id:2,value:"降价商品"},{id:3,value:"预购商品"}],typeParamsList:[{id:"",value:"全部"},{id:1,value:"购买商品"},{id:2,value:"账户提现"},{id:3,value:"退款"},{id:4,value:"诚信押金"}],payTypeParamsList:[{id:"",value:"全部"},{id:1,value:"支付宝"},{id:2,value:"微信"},{id:3,value:"百度钱包"},{id:4,value:"Paypal"},{id:5,value:"网银"},{id:6,value:"ios内购"},{id:7,value:"余额"}],statusParamsList:[{id:"",value:"全部"},{id:2,value:"待支付"},{id:3,value:"待发货"},{id:4,value:"待收货"},{id:5,value:"待评价"},{id:6,value:"已取消"},{id:7,value:"已删除"}],merTypeList:[{id:1,value:"普通商品"},{id:2,value:"降价商品"},{id:3,value:"预购商品"}],typeList:[{id:1,value:"购买商品"},{id:2,value:"账户提现"},{id:3,value:"退款"},{id:4,value:"诚信押金"}],payTypeList:[{id:1,value:"支付宝"},{id:2,value:"微信"},{id:3,value:"百度钱包"},{id:4,value:"Paypal"},{id:5,value:"网银"},{id:6,value:"ios内购"},{id:7,value:"余额"}],statusList:[{id:2,value:"待支付"},{id:3,value:"待发货"},{id:4,value:"待收货"},{id:5,value:"待评价"},{id:6,value:"已取消"},{id:7,value:"已删除"}],orderList:[],orderColumns:[{title:"序号",width:80,align:"center",render:function(t,a){return t("span",a.index+(e.params.currentPage-1)*e.params.pageSize+e.params.startNum)}},{title:"订单id",width:100,key:"orderId",align:"center"},{title:"订单号",width:100,key:"orderNumber",align:"center"},{title:"下单人id",width:100,key:"accountId",align:"center"},{title:"商品类型",width:100,align:"center",render:function(t,a){var r="";return e.merTypeList.forEach(function(e){e.id==a.row.merType&&(r=e.value)}),t("span",r)}},{title:"业务类型",width:100,align:"center",render:function(t,a){var r="";return e.typeList.forEach(function(e){e.id==a.row.type&&(r=e.value)}),t("span",r)}},{title:"支付类型",width:100,align:"center",render:function(t,a){var r="";return e.payTypeList.forEach(function(e){e.id==a.row.payType&&(r=e.value)}),t("span",r)}},{title:"状态",width:100,align:"center",render:function(t,a){var r="";return e.statusList.forEach(function(e){e.id==a.row.status&&(r=e.value)}),t("span",r)}},{title:"订单商品类型",width:100,align:"center",render:function(e,t){return e("span",t.row.orderDetailList[0].merCateName)}},{title:"订单名称",width:100,align:"center",render:function(e,t){return e("span",t.row.orderDetailList[0].name)}},{title:"订单封面",width:100,align:"center",render:function(e,t){return e("img",{attrs:{src:t.row.orderDetailList[0].imgAddress},style:{width:"45px"}})}},{title:"单价",width:100,align:"center",render:function(e,t){return e("span",t.row.orderDetailList[0].unitPrice)}},{title:"数量",width:100,align:"center",render:function(e,t){return e("span",t.row.orderDetailList[0].number)}},{title:"总价",width:100,align:"center",render:function(e,t){return e("span",t.row.orderDetailList[0].totalPrice)}},{title:"下单时间",width:100,key:"createDate",sortable:!0,align:"center"},{title:"更新时间",key:"updateDate",width:100,sortable:!0,align:"center"},{title:"支付时间",width:100,key:"paymentDate",sortable:!0,align:"center"},{title:"操作",minWidth:200,key:"action",align:"center",render:function(t,a){var r=t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginLeft:"10px"},on:{click:function(){e.consignment(a.row)}}},"发货")]);return 3==a.row.status?r:t("div","")}}]}},methods:{search:function(){this.params.currentPage=1,this.params.pageNum=1,this.getList()},selectPage:function(e){this.params.currentPage=e,this.params.pageNum=(this.params.currentPage-1)*this.params.pageSize+this.params.startNum;var t=i()({currentPage:e,accountId:JSON.parse(this.$route.params.pathParams).accountId});this.$router.push(this.$route.path.substr(0,this.$route.path.indexOf(this.$route.params.pathParams))+t),this.getList()},onPageSizeChange:function(e){this.getList(e)},getList:function(e){this.params.pageSize=e||this.params.pageSize,this.axiosbusiness.getList(this,{countUrl:"/order/count",listUrl:"/order/list",data:"orderList",success:function(){}},this.params)},consignment:function(e){var t=this;e.status=4;var a=e;delete a.orderDetailList,this.axios({method:"post",url:"/order/update",withCredentials:!0,data:this.Qs.stringify(a)}).then(function(e){t.loading=!1,200===e.data.code?t.$Message.success(e.data.msg):(t.$Message.error(e.data.msg),t.loading=!1)}).catch(function(e){t.loading=!1,t.$Message.error("系统异常")})}},watch:{$route:function(e,t){this.params.currentPage=1,this.params.pageNum=1,this.routerPath=this.$route.path,this.getList()}},created:function(){this.getList()},mounted:function(){}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body-wrap"},[a("div",{staticStyle:{color:"green"}},[e._v("\n        备注：下单人id即为账户id\n    ")]),e._v(" "),a("div",{staticClass:"body-btn-wrap"},[a("div",{staticClass:"search-wrap"},[a("Select",{staticClass:"search-wrap-input",attrs:{transfer:"",placeholder:"商品类型，全部"},model:{value:e.params.merType,callback:function(t){e.$set(e.params,"merType",t)},expression:"params.merType"}},e._l(e.merTypeParamsList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.value))])})),e._v(" "),a("Select",{staticClass:"search-wrap-input",attrs:{transfer:"",placeholder:"业务类型，全部"},model:{value:e.params.type,callback:function(t){e.$set(e.params,"type",t)},expression:"params.type"}},e._l(e.typeParamsList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.value))])})),e._v(" "),a("Select",{staticClass:"search-wrap-input",attrs:{transfer:"",placeholder:"支付类型，全部"},model:{value:e.params.payType,callback:function(t){e.$set(e.params,"payType",t)},expression:"params.payType"}},e._l(e.payTypeParamsList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.value))])})),e._v(" "),a("Input",{staticClass:"search-wrap-input",attrs:{placeholder:"下单人id"},model:{value:e.params.accountId,callback:function(t){e.$set(e.params,"accountId",t)},expression:"params.accountId"}}),e._v(" "),a("Select",{staticClass:"search-wrap-input",attrs:{transfer:"",placeholder:"状态，全部"},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},e._l(e.statusParamsList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.value))])})),e._v(" "),a("Button",{attrs:{type:"info"},on:{click:e.search}},[e._v("查询")])],1)]),e._v(" "),a("Table",{ref:"table",attrs:{border:"",columns:e.orderColumns,data:e.orderList,size:"small"}}),e._v(" "),a("div",{staticStyle:{display:"inline-block",float:"right","margin-top":"10px"}},[a("Page",{ref:"page",staticStyle:{"margin-right":"10px"},attrs:{"show-sizer":"","page-size-opts":e.params.pageSizeOpts,current:e.params.currentPage,total:e.params.total,pageSize:e.params.pageSize,"show-total":!0,"show-elevator":""},on:{"on-page-size-change":e.onPageSizeChange,"on-change":e.selectPage}})],1)],1)},staticRenderFns:[]},l=a("VU/8")(s,n,!1,null,null,null);t.default=l.exports}});
//# sourceMappingURL=10.dd0fa57ce388d576f8bb.js.map