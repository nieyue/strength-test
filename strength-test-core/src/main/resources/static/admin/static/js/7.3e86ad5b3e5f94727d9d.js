webpackJsonp([7],{kizd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),l=a.n(o),s={name:"Role",data:function(){var e=this;return{params:{pageSizeOpts:[10,20,50,100,500,1e3],startNum:1,currentPage:1,pageNum:1,pageSize:10,total:0},addRoleModel:!1,addLoading:!1,addRoleRules:{name:[{required:!0,message:"角色名为必填项",trigger:"blur"}],duty:[{required:!0,message:"角色职责为必填项",trigger:"blur"}]},addRole:{},updateRoleModel:!1,updateLoading:!1,updateRoleRules:{name:[{required:!0,message:"角色名为必填项",trigger:"blur"}],duty:[{required:!0,message:"角色职责为必填项",trigger:"blur"}]},updateRole:{roleId:1,name:""},deleteRole:{},roleList:[],roleColumns:[{title:"序号",minWidth:100,align:"center",render:function(t,a){return t("span",a.index+(e.params.currentPage-1)*e.params.pageSize+e.params.startNum)}},{title:"角色id",minWidth:100,key:"roleId",align:"center"},{title:"角色名称",minWidth:100,key:"name",align:"center"},{title:"角色职责",minWidth:100,key:"duty",align:"center"},{title:"修改时间",minWidth:100,key:"updateDate",sortable:!0,align:"center"},{title:"操作",minWidth:200,key:"action",align:"center",render:function(t,a){var o=t("Button",{props:{type:"success",size:"small"},style:{marginLeft:"10px"},on:{click:function(){e.$router.push("/main/rolePermission/"+a.row.roleId)}}},"角色权限"),l=t("Button",{props:{type:"primary",size:"small"},style:{marginLeft:"10px"},on:{click:function(){e.update(a.row)}}},"编辑");t("Button",{props:{type:"error",size:"small"},style:{marginLeft:"10px"},on:{click:function(){e.delete(a.row)}}},"删除"),t("div","");return t("div",[o,l])}}]}},methods:{selectPage:function(e){this.params.currentPage=e,this.params.pageNum=(this.params.currentPage-1)*this.params.pageSize+this.params.startNum;var t=l()({currentPage:e,accountId:JSON.parse(this.$route.params.pathParams).accountId});this.$router.push(this.$route.path.substr(0,this.$route.path.indexOf(this.$route.params.pathParams))+t),this.getList()},onPageSizeChange:function(e){this.getList(e)},getList:function(e){this.params.pageSize=e||this.params.pageSize,this.axiosbusiness.getList(this,{countUrl:"/role/count",listUrl:"/role/list",data:"roleList"},this.params)},add:function(e){this.addRoleModel=!0,this.addRole.name=e.name},addCancel:function(){this.addLoading||(this.addRoleModel=!1,this.$refs.addRole.resetFields())},addSure:function(){this.axiosbusiness.add(this,{ref:"addRole",url:"/role/add",requestObject:"addRole",loading:"addLoading",showModel:"addRoleModel"})},update:function(e){this.updateRoleModel=!0,this.axiosbusiness.get(this,{url:"/role/load?roleId="+e.roleId,data:"updateRole"})},updateCancel:function(){this.updateLoading||(this.updateRoleModel=!1,this.$refs.updateRole.resetFields())},updateSure:function(){this.axiosbusiness.update(this,{ref:"updateRole",url:"/role/update",requestObject:"updateRole",loading:"updateLoading",showModel:"updateRoleModel"})},delete:function(e){this.deleteRole={roleId:e.roleId},this.axiosbusiness.delete(this,{url:"/role/delete",requestObject:"deleteRole"})}},watch:{$route:function(e,t){this.selectPage(JSON.parse(this.$route.params.pathParams).currentPage)}},created:function(){this.selectPage(JSON.parse(this.$route.params.pathParams).currentPage)},mounted:function(){}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body-wrap"},[a("div",{staticClass:"body-btn-wrap"}),e._v(" "),a("Modal",{attrs:{title:"新增角色管理",closable:!1,"mask-closable":!1},model:{value:e.addRoleModel,callback:function(t){e.addRoleModel=t},expression:"addRoleModel"}},[a("Form",{ref:"addRole",attrs:{model:e.addRole,"label-width":100,"label-position":"right",rules:e.addRoleRules}},[a("FormItem",{attrs:{prop:"name",label:"角色名:"}},[a("Input",{attrs:{type:"text",placeholder:"角色名"},model:{value:e.addRole.name,callback:function(t){e.$set(e.addRole,"name",t)},expression:"addRole.name"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"duty",label:"角色职责:"}},[a("Input",{attrs:{type:"text",placeholder:"角色职责"},model:{value:e.addRole.duty,callback:function(t){e.$set(e.addRole,"duty",t)},expression:"addRole.duty"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.addCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",loading:e.addLoading}},[e.addLoading?a("span",[e._v("Loading...")]):a("span",{on:{click:e.addSure}},[e._v("确定")])])],1)],1),e._v(" "),a("Modal",{attrs:{title:"修改角色管理",closable:!1,"mask-closable":!1},model:{value:e.updateRoleModel,callback:function(t){e.updateRoleModel=t},expression:"updateRoleModel"}},[a("Form",{ref:"updateRole",attrs:{model:e.updateRole,"label-width":100,"label-position":"right",rules:e.updateRoleRules}},[a("FormItem",{attrs:{prop:"name",label:"角色名:"}},[a("Input",{attrs:{type:"text",placeholder:"角色名"},model:{value:e.updateRole.name,callback:function(t){e.$set(e.updateRole,"name",t)},expression:"updateRole.name"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"duty",label:"角色职责:"}},[a("Input",{attrs:{type:"text",placeholder:"角色职责"},model:{value:e.updateRole.duty,callback:function(t){e.$set(e.updateRole,"duty",t)},expression:"updateRole.duty"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.updateCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",loading:e.updateLoading}},[e.updateLoading?a("span",[e._v("Loading...")]):a("span",{on:{click:e.updateSure}},[e._v("确定")])])],1)],1),e._v(" "),a("Table",{ref:"table",attrs:{border:"",height:"500",columns:e.roleColumns,data:e.roleList,size:"small"}}),e._v(" "),a("div",{staticStyle:{display:"inline-block",float:"right","margin-top":"10px"}},[a("Page",{ref:"page",staticStyle:{"margin-right":"10px"},attrs:{"show-sizer":"","page-size-opts":e.params.pageSizeOpts,current:e.params.currentPage,total:e.params.total,pageSize:e.params.pageSize,"show-total":!0,"show-elevator":""},on:{"on-page-size-change":e.onPageSizeChange,"on-change":e.selectPage}})],1)],1)},staticRenderFns:[]},d=a("VU/8")(s,r,!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=7.3e86ad5b3e5f94727d9d.js.map