webpackJsonp([8],{aqCY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"Permission",data:function(){var e=this;return{params:{pageSizeOpts:[10,20,50,100,500,1e3],startNum:1,currentPage:1,pageNum:1,pageSize:10,total:0},typeList:[{id:1,value:"开放"},{id:2,value:"鉴权"}],typeParamsList:[{id:"",value:"全部"},{id:1,value:"开放"},{id:2,value:"鉴权"}],addPermissionModel:!1,addLoading:!1,addPermissionRules:{type:[{type:"number",required:!0,message:"权限类型为必选项",trigger:"change"}],managerName:[{required:!0,message:"权限管理名为必填项",trigger:"blur"}],name:[{required:!0,message:"权限名为必填项",trigger:"blur"}],route:[{required:!0,message:"路由为必填项",trigger:"blur"}]},addPermission:{},updatePermissionModel:!1,updateLoading:!1,updatePermissionRules:{type:[{type:"number",required:!0,message:"权限类型为必选项",trigger:"change"}],managerName:[{required:!0,message:"权限管理名为必填项",trigger:"blur"}],name:[{required:!0,message:"权限名为必填项",trigger:"blur"}],route:[{required:!0,message:"路由为必填项",trigger:"blur"}]},updatePermission:{},deletePermission:{},permissionList:[],permissionListTree:[],permissionColumns:[{title:"序号",minWidth:100,align:"center",render:function(t,a){return t("span",a.index+(e.params.currentPage-1)*e.params.pageSize+e.params.startNum)}},{title:"权限id",minWidth:100,key:"permissionId",align:"center"},{title:"权限类型",minWidth:100,key:"type",align:"center",render:function(t,a){var s="";return e.typeList.forEach(function(e){e.id==a.row.type&&(s=e.value)}),t("span",s)}},{title:"权限管理名",minWidth:100,key:"managerName",align:"center"},{title:"权限名",minWidth:100,key:"name",align:"center"},{title:"路由",minWidth:100,key:"route",align:"center"},{title:"修改时间",minWidth:100,key:"updateDate",sortable:!0,align:"center"},{title:"操作",minWidth:200,key:"action",align:"center",render:function(t,a){var s=t("Button",{props:{type:"primary",size:"small"},style:{marginLeft:"10px"},on:{click:function(){e.update(a.row)}}},"编辑"),i=t("Button",{props:{type:"error",size:"small"},style:{marginLeft:"10px"},on:{click:function(){e.delete(a.row)}}},"删除");t("div","");return t("div",[s,i])}}]}},methods:{god:function(){var e=this;this.$Spin.show(),this.axios({method:"post",url:"/permission/init",withCredentials:!0}).then(function(t){console.log(t.data),e.$Spin.hide(),200==t.data.code?(e.getList(),e.$Message.success("成功")):e.$Message.error(t.data.msg)}).catch(function(t){console.log(t),e.$Message.error("错误")})},search:function(){this.params.currentPage=1,this.params.pageNum=1,this.getList()},selectPage:function(e){this.params.currentPage=e,this.params.pageNum=(this.params.currentPage-1)*this.params.pageSize+this.params.startNum,this.getList()},onPageSizeChange:function(e){this.getList(e)},getList:function(e){var t=this;this.params.pageSize=e||this.params.pageSize,this.axiosbusiness.getList(this,{countUrl:"/permission/count",listUrl:"/permission/list",data:"permissionList",success:function(){t.addPermission={type:1}}},this.params)},add:function(e){this.addPermissionModel=!0},addCancel:function(){this.addLoading||(this.addPermissionModel=!1,this.$refs.addPermission.resetFields())},addSure:function(){this.axiosbusiness.add(this,{ref:"addPermission",url:"/permission/add",requestObject:"addPermission",loading:"addLoading",showModel:"addPermissionModel"})},update:function(e){this.updatePermissionModel=!0,this.axiosbusiness.get(this,{url:"/permission/load?permissionId="+e.permissionId,data:"updatePermission"})},updateCancel:function(){this.updateLoading||(this.updatePermissionModel=!1,this.$refs.updatePermission.resetFields())},updateSure:function(){this.axiosbusiness.update(this,{ref:"updatePermission",url:"/permission/update",requestObject:"updatePermission",loading:"updateLoading",showModel:"updatePermissionModel"})},delete:function(e){this.deletePermission={permissionId:e.permissionId},this.axiosbusiness.delete(this,{url:"/permission/delete",requestObject:"deletePermission"})}},created:function(){console.log(1111),this.getList()},mounted:function(){}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body-wrap"},[a("Alert",{attrs:{type:"success"}},[a("p",[e._v("权限类型:")]),e._v(" "),a("p",[e._v("开放,（代表所有账户都能访问此接口数据，包括未授权、未登录等；即是开放。）")]),e._v(" "),a("p",[e._v("鉴权,（代表需要登录或者授权，且拥有此权限的账户才能访问此接口数据）")])]),e._v(" "),a("div",{staticClass:"body-btn-wrap"},[a("Button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("增加权限")]),e._v(" "),a("Button",{attrs:{type:"error"},on:{click:e.god}},[e._v("一键更新到最新")]),e._v(" "),a("div",{staticClass:"search-wrap"},[a("Select",{staticClass:"search-wrap-input",attrs:{transfer:"",placeholder:"权限类型，全部"},model:{value:e.params.type,callback:function(t){e.$set(e.params,"type",t)},expression:"params.type"}},e._l(e.typeParamsList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.value))])})),e._v(" "),a("Input",{staticClass:"search-wrap-input",attrs:{placeholder:"权限管理名，模糊查询"},model:{value:e.params.managerName,callback:function(t){e.$set(e.params,"managerName",t)},expression:"params.managerName"}}),e._v(" "),a("Input",{staticClass:"search-wrap-input",attrs:{placeholder:"权限名，模糊查询"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}}),e._v(" "),a("Input",{staticClass:"search-wrap-input",attrs:{placeholder:"路由"},model:{value:e.params.route,callback:function(t){e.$set(e.params,"route",t)},expression:"params.route"}}),e._v(" "),a("Button",{attrs:{type:"info"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),a("Modal",{attrs:{title:"新增权限管理",closable:!1,"mask-closable":!1},model:{value:e.addPermissionModel,callback:function(t){e.addPermissionModel=t},expression:"addPermissionModel"}},[a("Form",{ref:"addPermission",attrs:{model:e.addPermission,"label-width":100,"label-position":"right",rules:e.addPermissionRules}},[a("FormItem",{attrs:{prop:"type",label:"权限类型:"}},[a("Select",{staticStyle:{width:"100px"},attrs:{transfer:"",size:"large"},model:{value:e.addPermission.type,callback:function(t){e.$set(e.addPermission,"type",t)},expression:"addPermission.type"}},e._l(e.typeList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.value))])}))],1),e._v(" "),a("FormItem",{attrs:{prop:"managerName",label:"权限管理名:"}},[a("Input",{attrs:{type:"text",placeholder:"权限管理名"},model:{value:e.addPermission.managerName,callback:function(t){e.$set(e.addPermission,"managerName",t)},expression:"addPermission.managerName"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"name",label:"权限名:"}},[a("Input",{attrs:{type:"text",placeholder:"权限名"},model:{value:e.addPermission.name,callback:function(t){e.$set(e.addPermission,"name",t)},expression:"addPermission.name"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"route",label:"路由:"}},[a("Input",{attrs:{type:"text",placeholder:"路由"},model:{value:e.addPermission.route,callback:function(t){e.$set(e.addPermission,"route",t)},expression:"addPermission.route"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.addCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",loading:e.addLoading}},[e.addLoading?a("span",[e._v("Loading...")]):a("span",{on:{click:e.addSure}},[e._v("确定")])])],1)],1),e._v(" "),a("Modal",{attrs:{title:"修改权限管理",closable:!1,"mask-closable":!1},model:{value:e.updatePermissionModel,callback:function(t){e.updatePermissionModel=t},expression:"updatePermissionModel"}},[a("Form",{ref:"updatePermission",attrs:{model:e.updatePermission,"label-width":100,"label-position":"right",rules:e.updatePermissionRules}},[a("FormItem",{attrs:{prop:"type",label:"权限类型:"}},[a("Select",{staticStyle:{width:"100px"},attrs:{transfer:"",size:"large"},model:{value:e.updatePermission.type,callback:function(t){e.$set(e.updatePermission,"type",t)},expression:"updatePermission.type"}},e._l(e.typeList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.value))])}))],1),e._v(" "),a("FormItem",{attrs:{prop:"managerName",label:"权限管理名:"}},[a("Input",{attrs:{type:"text",placeholder:"权限管理名"},model:{value:e.updatePermission.managerName,callback:function(t){e.$set(e.updatePermission,"managerName",t)},expression:"updatePermission.managerName"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"name",label:"权限名:"}},[a("Input",{attrs:{type:"text",placeholder:"权限名"},model:{value:e.updatePermission.name,callback:function(t){e.$set(e.updatePermission,"name",t)},expression:"updatePermission.name"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"route",label:"路由:"}},[a("Input",{attrs:{type:"text",placeholder:"路由"},model:{value:e.updatePermission.route,callback:function(t){e.$set(e.updatePermission,"route",t)},expression:"updatePermission.route"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.updateCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",loading:e.updateLoading}},[e.updateLoading?a("span",[e._v("Loading...")]):a("span",{on:{click:e.updateSure}},[e._v("确定")])])],1)],1),e._v(" "),a("Table",{ref:"table",attrs:{border:"",height:"500",columns:e.permissionColumns,data:e.permissionList,size:"small"}}),e._v(" "),a("div",{staticStyle:{display:"inline-block",float:"right","margin-top":"10px"}},[a("Page",{ref:"page",staticStyle:{"margin-right":"10px"},attrs:{"show-sizer":"","page-size-opts":e.params.pageSizeOpts,current:e.params.currentPage,total:e.params.total,pageSize:e.params.pageSize,"show-total":!0,"show-elevator":""},on:{"on-page-size-change":e.onPageSizeChange,"on-change":e.selectPage}})],1)],1)},staticRenderFns:[]},r=a("VU/8")(s,i,!1,null,null,null);t.default=r.exports}});
//# sourceMappingURL=8.1bbab950c80d0ea9125b.js.map